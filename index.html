<!doctype html>
<html lang="hi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Gulshan Digital Zone — Store (Auth Demo)</title>
  <meta name="theme-color" content="#0f766e">
  <style>
    :root{
      --accent:#0f766e;
      --muted:#6b7280;
      --bg:#f8fafc;
      --card-bg:#ffffff;
      --text:#001aff;
    }
    body{font-family:Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; margin:0; background:var(--bg); color:#0b1220;}
    header{background:#fff;padding:12px 18px;border-bottom:1px solid #e6edf0;display:flex;align-items:center;justify-content:space-between;gap:12px}
    .logo{display:flex;align-items:center;gap:10px}
    .logo .brand{font-weight:700;color:var(--accent)}
    nav{display:flex;gap:10px;align-items:center}
    a.navlink{color:var(--muted);text-decoration:none;padding:8px 10px;border-radius:8px}
    a.navlink:hover{background:#f0f6f5;color:#000}
    .btn{background:transparent;border:1px solid #e6edf0;padding:8px 10px;border-radius:8px;cursor:pointer;font-size:14px}
    .btn img{vertical-align:middle}
    main{padding:18px}
    .hero{background:var(--card-bg);padding:18px;border-radius:12px;box-shadow:0 6px 18px rgba(2,6,23,0.04)}
    .products{display:grid;grid-template-columns:repeat(2,1fr);gap:14px;margin-top:14px}
    .card{background:var(--card-bg);border-radius:10px;padding:12px;box-shadow:0 4px 10px rgba(2,6,23,0.04);display:flex;gap:12px;align-items:flex-start}
    .card img{width:110px;height:80px;object-fit:cover;border-radius:8px}
    .info{flex:1}
    .price{font-weight:700;color:var(--accent);margin-top:6px}
    footer{padding:18px;text-align:center;color:var(--muted);font-size:13px}
    /* small responsive */
    @media (max-width:600px){
      .products{grid-template-columns:1fr}
      nav{flex-wrap:wrap}
    }
  </style>
</head>
<body>

<header>
  <div class="logo">
    <div style="width:44px;height:44px;border-radius:8px;background:linear-gradient(135deg,#0f766e,#06b6d4);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700">GZ</div>
    <div>
      <div class="brand">Gulshan Digital Zone</div>
      <div style="font-size:12px;color:var(--muted)">Simple Store Demo</div>
    </div>
  </div>

  <!-- NAV: keep your original 3 links + auth buttons (DO NOT HIDE) -->
  <nav id="main-nav">
    <!-- Original 3 links (keep as-is) -->
    <a class="navlink" href="#">Home</a>
    <a class="navlink" href="#">Products</a>
    <a class="navlink" href="#">Cart</a>

    <!-- Google sign-in button -->
    <button id="btn-google" class="btn" title="Sign in with Google" style="display:flex;align-items:center;gap:8px;">
      <img src="https://cdn-icons-png.flaticon.com/512/300/300221.png" width="18" alt="G">
      <span style="display:inline-block;">Google</span>
    </button>

    <!-- Facebook sign-in button -->
    <button id="btn-facebook" class="btn" title="Sign in with Facebook" style="display:flex;align-items:center;gap:8px;">
      <img src="https://cdn-icons-png.flaticon.com/512/124/124010.png" width="18" alt="F">
      <span>Facebook</span>
    </button>

    <!-- Account / Login button -->
    <button id="btn-account" class="btn" style="display:flex;align-items:center;gap:8px;">
      <img id="account-icon" src="https://cdn-icons-png.flaticon.com/512/1144/1144760.png" width="20" alt="account">
      <span id="login-text">Login</span>
    </button>
  </nav>
</header>

<main>
  <section class="hero">
    <div>
      <h1>Welcome to Gulshan Store</h1>
      <p class="muted">Demo store with Google & Facebook sign-in (Firebase Auth). Replace firebaseConfig before use.</p>
    </div>
  </section>

  <section class="products" aria-label="Products">
    <div class="card">
      <img src="https://picsum.photos/200/140?random=1" alt="product">
      <div class="info">
        <div style="font-weight:600">Product One</div>
        <div class="muted">Short description of product one.</div>
        <div class="price">₹ 499</div>
      </div>
    </div>

    <div class="card">
      <img src="https://picsum.photos/200/140?random=2" alt="product">
      <div class="info">
        <div style="font-weight:600">Product Two</div>
        <div class="muted">Short description of product two.</div>
        <div class="price">₹ 899</div>
      </div>
    </div>
  </section>
</main>

<footer>
  © <span id="year"></span> Gulshan Digital Zone — Demo. All rights reserved.
</footer>

<!-- FIREBASE SDKs (compat) -->
<script src="https://www.gstatic.com/firebasejs/9.24.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.24.0/firebase-auth-compat.js"></script>

<script>
  // Set year
  document.getElementById('year').textContent = new Date().getFullYear();

  /***** IMPORTANT: Replace the firebaseConfig below with your project's config *****
   * Go to Firebase Console > Project settings > Your apps > Firebase SDK snippet (Config)
   * Replace each REPLACE_ value with your project's values.
   *****************************************************************************/

  const firebaseConfig = {
    apiKey: "AIzaSyBIaUMURs-honTuc2Y5hPLGoqOruDKxtV8",
    authDomain: "store-f9d8a.firebaseapp.com",
    projectId: "store-f9d8a",
    storageBucket: "store-f9d8a.appspot.com",
    messagingSenderId: "913417248934",
    appId: "1:913417248934:web:2345ee2dc0177bf3ae1467",
    measurementId: "G-Q2TT0WX1PE"
  };

  // Initialize Firebase
  try {
    firebase.initializeApp(firebaseConfig);
    console.log('Firebase initialized');
  } catch (e) {
    console.warn('Firebase init warning (might be already initialized):', e && e.message);
  }
  const auth = firebase.auth();

  // Providers
  const googleProvider = new firebase.auth.GoogleAuthProvider();
  const facebookProvider = new firebase.auth.FacebookAuthProvider();

  // Buttons
  const btnGoogle = document.getElementById('btn-google');
  const btnFacebook = document.getElementById('btn-facebook');
  const btnAccount = document.getElementById('btn-account');
  const loginText = document.getElementById('login-text');
  const accountIcon = document.getElementById('account-icon');

  // Click handlers
  btnGoogle.addEventListener('click', () => {
    console.log('Google button clicked — opening popup');
    auth.signInWithPopup(googleProvider)
      .then(res => { console.log('Google sign-in success', res.user); alert('Signed in: ' + (res.user.displayName || res.user.email)); })
      .catch(err => {
        console.error('Google sign-in error', err);
        alert('Google sign-in error: ' + err.message + '\\n(See console for details)');
      });
  });

  btnFacebook.addEventListener('click', () => {
    console.log('Facebook button clicked — opening popup');
    auth.signInWithPopup(facebookProvider)
      .then(res => { console.log('Facebook sign-in success', res.user); alert('Signed in: ' + (res.user.displayName || res.user.email)); })
      .catch(err => {
        console.error('Facebook sign-in error', err);
        alert('Facebook sign-in error: ' + err.message + '\\n(See console for details)');
      });
  });

  // Account button acts as login hint or logout (if logged in)
  btnAccount.addEventListener('click', () => {
    const user = auth.currentUser;
    if (user) {
      // Ask for logout confirmation
      if (confirm('Logout karna chahte ho?')) {
        auth.signOut().catch(err => alert('Signout error: ' + err.message));
      }
    } else {
      // If not logged in, prompt to use Google/Facebook buttons
      alert('Login karne ke liye Google ya Facebook button dabayein.');
    }
  });

  // Observe auth state
  auth.onAuthStateChanged(user => {
    if (user) {
      // Show user details
      loginText.textContent = user.displayName || user.email || 'Account';
      accountIcon.src = user.photoURL || 'https://cdn-icons-png.flaticon.com/512/3135/3135715.png';
      console.log('User signed in:', user);
    } else {
      // Reset to default
      loginText.textContent = 'Login';
      accountIcon.src = 'https://cdn-icons-png.flaticon.com/512/1144/1144760.png';
      console.log('No user signed in');
    }
  });

  // Better error logging for debugging
  window.addEventListener('unhandledrejection', e => {
    console.error('Unhandled promise rejection:', e.reason);
  });
  window.addEventListener('error', e => {
    console.error('Window error:', e.message, e.error);
  });

  // Helpful dev note: If popups are blocked, tell user to allow popups or serve page via http server.
  // Example: run `npx http-server` in the folder and open http://localhost:8080
</script>

</body>
</html>
